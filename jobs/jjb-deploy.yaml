---
- job:
    name: jjb-deploy
    project-type: pipeline
    concurrent: false
    parameters:
      - string:
          name: GIT_REPO
          default: http://github.com/ceph/ceph-csi
          description: The git repo url
      - string:
          name: GIT_BRANCH
          default: ci/centos
          description: The git branch
    properties:
      - github:
          url: https://github.com/ceph/ceph-csi
      - build-discarder:
          days-to-keep: 7
          artifact-days-to-keep: 7
    pipeline-scm:
      scm:
        git:
          url: https://github.com/ceph/ceph-csi
          branches:
            - ci/centos
      script-path: jjb-deploy.groovy
      lightweight-checkout: false
    scm:
      - git:
          name: origin
          url: $GIT_REPO
          branches:
            - $GIT_BRANCH
    triggers:
      - pollscm:
          cron: "H/5 * * * *"
